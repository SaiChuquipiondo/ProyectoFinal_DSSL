<div class="login-screen">
  <div class="background-pattern"></div>

  <div class="login-card">
    <!-- Header con logo -->
    <div class="card-header">
      <div class="logo">
        <img src="image.png" alt="Logo UNU" />
      </div>
      <h1>Universidad Nacional de Ucayali</h1>
      <p>Sistema de Gestión de Tesis</p>
    </div>

    <!-- Formulario -->
    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form">
      <!-- Campo usuario -->
      <div
        class="form-control"
        [class.invalid]="loginForm.get('username')?.invalid && loginForm.get('username')?.touched"
      >
        <label>Usuario</label>
        <div class="input-wrapper">
          <svg
            class="icon"
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
            <circle cx="12" cy="7" r="4" />
          </svg>
          <input
            type="text"
            formControlName="username"
            placeholder="Ingresa tu usuario"
            autocomplete="username"
          />
        </div>
        @if (loginForm.get('username')?.invalid && loginForm.get('username')?.touched) {
        <small class="error">El usuario es requerido</small>
        }
      </div>

      <!-- Campo contraseña -->
      <div
        class="form-control"
        [class.invalid]="loginForm.get('password')?.invalid && loginForm.get('password')?.touched"
      >
        <label>Contraseña</label>
        <div class="input-wrapper">
          <svg
            class="icon"
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2" />
            <path d="M7 11V7a5 5 0 0 1 10 0v4" />
          </svg>
          <input
            type="password"
            formControlName="password"
            placeholder="Ingresa tu contraseña"
            autocomplete="current-password"
          />
        </div>
        @if (loginForm.get('password')?.invalid && loginForm.get('password')?.touched) {
        <small class="error">La contraseña es requerida</small>
        }
      </div>

      <!-- Alert de error -->
      @if (error) {
      <div class="alert">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path
            d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"
          />
        </svg>
        <div>
          <strong>Error</strong>
          <p>{{ error }}</p>
        </div>
      </div>
      }

      <!-- Botón -->
      <button type="submit" class="btn-submit" [disabled]="loginForm.invalid || isLoading">
        @if (isLoading) {
        <span class="loader"></span>
        Validando... } @else { Iniciar Sesión
        <svg
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2.5"
        >
          <path d="M5 12h14M12 5l7 7-7 7" />
        </svg>
        }
      </button>
    </form>

    <!-- Footer -->
    <div class="card-footer">
      <p>© 2025-2026 Universidad Nacional de Ucayali</p>
    </div>
  </div>
</div>
